[% DEFAULT title = 'Report for ' _ project_name _ ', ' _ rep_path_full -%]
<div class=nav><a href="javascript:history.back();">Back</a>, <a href="[% c.uri_for('/') %]">homepage</a> or <a href="[% c.uri_for( '/report/pr-' _ project_name ) %]">[% project_name %] report list</a>.</div>

<form method="GET" action="[% project_uri _ 'do' %]">

[% table_col_num = 18 %]
<table class=data>
[% FOREACH rev IN revs -%]

    [% IF loop.count() != 1 %]
        <tr><td colspan=[% table_col_num %] >&nbsp;</td></tr>
    [% END -%]
    <tr>
    <td align=left colspan=[% table_col_num %]>
        <a href="[% c.uri_for( '/table/rev/id-' _ rev.rev_id ) %]">[% rev.rev_num %]</a>,
        [% rev.date %],
        <a href="[% c.uri_for( '/table/rep_author/id-' _ rev.author_id ) %]">[% rev.rep_login %]</a>
    </td>
    </tr>

[% this_rev_id = rev.rev_id %]
[% this_rep_path_id = rev.rep_path_id %]
[% prev_was_empty = 1 %]
[% FOREACH build IN builds.$this_rev_id.$this_rep_path_id -%]
    [% prev_was_empty = 0 %]
    [% IF loop.count() == 1 %]
    <tr>
    <th>&nbsp;</th>
    <th colspan=4>Machine</th>
    <th colspan=3>Build</th>
    <th colspan=1>Test</th>
    <th colspan=8>Results</th>
    <th>&nbsp;</th>
    </tr>

    <tr>
    <th>&nbsp;</th>

    <th>Name</th>
    <th>CPU</th>
    <th>OS</th>
    <th>Arch</th>

    <th>cc</th>
    <th>devel</th>
    <th>optimize</th>

    <th>Harness</th>

    <th>id</th>
    <th align=center>Not seen</th>
    <th align=center>Failed</th>
    <th align=center>Unknown</th>
    <th align=center>Todo</th>
    <th align=center>Bonus</th>
    <th align=center>Skip</th>
    <th align=center>Ok</th>

    <th>&nbsp;</th>
    </tr>
    [% END -%]

  <tr class="[% IF loop.count() % 2 %]even[% ELSE %]odd[% END %]">
    <td align=right>[% loop.count() %]</td>

    <td><a href="[% c.uri_for( '/table/machine/id-' _ build.machine_id ) %]">[% build.machine_name %]</a></td>
    <td>[% build.cpuarch %]</td>
    <td>[% build.osname %]</td>
    <td>[% build.archname %]</td>

    <td><a href="[% c.uri_for( '/table/build_conf/id-' _ build.build_conf_id ) %]">[% build.cc %]</a></td>
    <td>[% build.devel %]</td>
    <td>[% build.optimize %]</td>

    <td><a href="[% c.uri_for( '/table/trun_conf/id-' _ build.trun_conf_id ) %]">[% build.harness_args %]</a></td>

    <td><a href="[% c.uri_for( '/table/trun/id-' _ build.trun_id ) %]">[% build.trun_id %]</a></td>
    <td>[% build.num_notseen %]</td>
    <td>[% build.num_failed %]</td>
    <td>[% build.num_unknown %]</td>
    <td>[% build.num_todo %]</td>
    <td>[% build.num_bonus %]</td>
    <td>[% build.num_skip %]</td>
    <td>[% build.num_ok %]</td>

    <td><input type=checkbox name="[% 'trun-' _ build.trun_id  | html %]" /></td>
  </tr>
[% END -%]
[% IF prev_was_empty %]
    <tr>
    <th align=left colspan=[% table_col_num %]>
    Not tested.
    </td>
    </tr>

[% END -%]

[% END -%]

    <tr>
    <td align=right colspan=[% table_col_num %]>
    <input type="submit" id="submit" name="Submit" value="Show me" />
    </td>
    </tr>

</table>
</form>

[% pager_html %]
<div class=footinfo>
Report for: <a href="[% c.uri_for('/table/project/id-' _ project_id ) %]">[% project_name %]</a>,
[% IF rep_path_type %][% rep_path_type %] [% END %]<a href="[% c.uri_for( '/table/rep_path/id-' _ rep_path_id ) %]">[% rep_path_nice %]</a>
</div>

